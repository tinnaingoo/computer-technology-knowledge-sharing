<!DOCTYPE html>
<html lang="en">
<head>
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
   <link rel="stylesheet" href="css/topnav.css">
   <link rel="stylesheet" href="css/layout.css">
   <link rel="stylesheet" href="css/ad-styles.css">
   <link rel="stylesheet" href="css/styles.css">

   <title>Computer Technology and Knowledge Sharing</title>
</head>
<body>

<div class="topnav" id="myTopnav">
   <a href="#home" class="active">Home</a>
   <a href="#news">News</a>
   <a href="#contact">Contact</a>
   <a href="#about">About</a>
   <a href="javascript:void(0);" class="icon" onclick="myFunction()">
     <i class="fa fa-bars"></i>
   </a>
</div>

<div class="row">
   <div style="padding-left:16px">
     <h2>Responsive Topnav Example</h2>
     <p>Resize the browser window to see how it works.</p>
   </div>
</div>

<div class="row">
   <div class="col-9" id="postList">
     <!-- Post list will be dynamically generated here -->
   </div>
   <div class="col-3">
     <div class="ad-container">
        <div class="ad-heading">Unleash Your Creativity with ChatGPT!</div>
        <div class="ad-subheading">Transform Ideas into Reality with our AI-powered Assistant</div>
        <img src="your-image-url.jpg" alt="Creative AI" class="ad-image">
        <p>Experience the power of ChatGPT, your personal AI assistant that fuels innovation and sparks creativity.</p>
        <p>Whether you're a writer, designer, or problem solver, ChatGPT is here to elevate your work.</p>
        <a href="your-call-to-action-url" class="ad-button">Get Started</a>
    </div>
   </div>
</div>

<script>
   function myFunction() {
     var x = document.getElementById("myTopnav");
     if (x.className === "topnav") {
       x.className += " responsive";
     } else {
       x.className = "topnav";
     }
   }

   // Function to load posts from JSON and display in the postList
   async function loadPosts() {
     var postListDiv = document.getElementById("postList");

     try {
       // Fetch JSON data from post.json
       var response = await fetch("post.json");
       var posts = await response.json();

       // Iterate through posts and create HTML elements for each post
       posts.posts.forEach(function(post) {
         var postElement = document.createElement("div");
         postElement.innerHTML = `
           <div class="post" onclick="showPreview(${post.id})">
             <img src="${post.imageUrl}" alt="${post.title}" width="100%">
             <p>${post.title}</p>
           </div>
         `;
         postListDiv.appendChild(postElement);
       });
     } catch (error) {
       console.error("Error loading posts:", error);
     }
   }

   // Function to show preview page for the selected post
   function showPreview(postId) {
     // Pass post details to preview.html using URL parameters
     var selectedPost = posts.posts.find(post => post.id === postId);
     var queryString = `id=${selectedPost.id}&title=${encodeURIComponent(selectedPost.title)}&imageUrl=${encodeURIComponent(selectedPost.imageUrl)}&description=${encodeURIComponent(selectedPost.description)}&tag=${encodeURIComponent(selectedPost.tag)}&downloadLink=${encodeURIComponent(selectedPost.downloadLink)}`;
     
     // Redirect to preview.html with post details
     window.location.href = `preview.html?${queryString}`;
   }

   // Call loadPosts when the page loads
   window.onload = loadPosts;
</script>

</body>
</html>
